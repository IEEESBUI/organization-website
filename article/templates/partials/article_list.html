{% load static %}

{% for article in articles %}
<div class="article-card border rounded-lg overflow-hidden animate-on-scroll delay-400" 
     data-categories="{% for category in article.categories.all %}{{ category.id }}{% if not forloop.last %},{% endif %}{% endfor %}">
  <div class="relative w-full aspect-video">
    {% if article.image %}
    <img src="{{ article.image.url }}" alt="{{ article.title }}" class="object-cover w-full h-full">
    {% else %}
    <img src="{% static 'images/IEEE-Logo-Round.png' %}" alt="Placeholder" class="object-cover w-full h-full">
    {% endif %}
  </div>
  <div class="p-4">
    <div class="flex justify-between items-center mb-2">
      <div class="flex items-center text-xs text-gray-600">
        <i class="far fa-calendar-alt mr-1"></i>
        {{ article.created_at|date:"F d, Y" }}
      </div>
      <span class="text-xs px-2 py-1 bg-gray-100 rounded-full">
        {% with first_category=article.categories.first %}
          {% if first_category %}
            {{ first_category.name }}
          {% else %}
            Uncategorized
          {% endif %}
        {% endwith %}
      </span>
    </div>
    <h3 class="font-bold mb-2">{{ article.title }}</h3>
    <p class="text-sm text-gray-600 mb-3">{{ article.excerpt|truncatechars:100 }}</p>
    <div class="flex justify-between items-center">
      <div class="text-xs text-gray-600">By {{ article.author.get_full_name|default:article.author.username }}</div>
      <a href="{% url 'article_detail' article.slug %}" class="text-xs text-[#f32929] hover:underline">
        Read More â†’
      </a>
    </div>
  </div>
</div>
{% empty %}
<div class="col-span-3 text-center py-8 animate-on-scroll delay-400">
  <p class="text-gray-600">No articles found matching your criteria.</p>
</div>
{% endfor %}
