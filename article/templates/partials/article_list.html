{% load static %}

{% for article in articles %}
<div class="article-card border rounded-lg overflow-hidden animate-on-scroll delay-400" 
     data-categories="{% for category in article.categories.all %}{{ category.id }}{% if not forloop.last %},{% endif %}{% endfor %}">
  <div class="relative w-full aspect-video">
    {% if article.image %}
    <img src="{{ article.image }}" alt="{{ article.title }}" class="object-cover w-full h-full">
    {% else %}
    <img src="{% static 'images/IEEE-Logo-Round.png' %}" alt="Placeholder" class="object-cover w-full h-full">
    {% endif %}
  </div>
  <div class="p-4">
    <div class="flex justify-between items-center mb-2">
      <div class="flex items-center text-xs text-gray-600">
        <i class="far fa-calendar-alt mr-1"></i>
        {{ article.created_at|date:"F d, Y" }}
      </div>
      <span class="text-xs px-2 py-1 bg-gray-100 rounded-full">
        {% with first_category=article.categories.first %}
          {% if first_category %}
            {{ first_category.name }}
          {% else %}
            Uncategorized
          {% endif %}
        {% endwith %}
      </span>
    </div>
    <h3 class="font-bold mb-2">{{ article.title }}</h3>
    <p class="text-sm text-gray-600 mb-3">{{ article.excerpt|truncatechars:100 }}</p>
    <div class="flex justify-between items-center">
      <div class="text-xs text-gray-600">By {{ article.author.get_full_name|default:article.author.username }}</div>
      <a href="{% url 'article_detail' article.slug %}" class="text-xs text-[#f32929] hover:underline">
        Read More →
      </a>
    </div>
  </div>
</div>
{% empty %}
<div class="col-span-3 flex flex-col items-center justify-center space-y-4 py-12 animate-on-scroll delay-400">
  <!-- Search / Empty Icon -->
  <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M21 21l-4.35-4.35M9.5 17a7.5 7.5 0 100-15 7.5 7.5 0 000 15z" />
  </svg>

  <!-- Headline -->
  <h3 class="text-gray-700 text-xl font-semibold">
    No Articles Found
  </h3>

  <!-- Subtext -->
  <p class="text-gray-500 max-w-md text-center">
    We couldn’t find any articles matching your criteria. Try adjusting your search terms or clearing the filters to view all articles.
  </p>

{% endfor %}
